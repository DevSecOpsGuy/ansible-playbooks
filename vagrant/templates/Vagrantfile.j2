VAGRANTFILE_API_VERSION = '2'

Vagrant.configure VAGRANTFILE_API_VERSION do |config|
{% for item in range(1, instance_num + 1)  %}
  config.vm.define 'bench-{{item}}' do |bench|
    bench.vm.hostname = 'bench-{{item}}'
    bench.vm.box = 'trusty64'
    bench.vm.network :public_network, dev: 'br0', mode: 'bridge', ip: '192.168.11.3{{item}}'
  end

{% endfor %}
  config.vm.provider 'libvirt' do |domain|
    domain.cpus = 1
    domain.memory = 1024
    domain.volume_cache = 'writeback'
  end

  config.vm.provision 'ansible' do |ansible|
    ansible.playbook = '{{ansible_env.HOME}}/ansible-playbooks/provision/provision.yml'
  end
end
